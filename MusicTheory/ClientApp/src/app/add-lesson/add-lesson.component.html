<form #lessonForm="ngForm">
  <div>
    <label>Lesson</label>

    {{currentLesson | json}}
    <select class="form-control"
            (change)="onLessonSelect($event)">
      <option value="">Select Existing</option>
      <option [value]="lesson.id"
              *ngFor="let lesson of lessons">
        {{lesson.name}}
      </option>
    </select>

    <br />

    <div class="form-group">

      <input type="text"
             [(ngModel)]="currentLesson.name"
             class="form-control"
             name="currentLesson.name"
             placeholder="Add New">
    </div>

    <button *ngIf="currentLesson.id"
            type="button"
            class="btn btn-primary"
            (click)="saveLesson()">Save Lesson</button>
    {{message}}
  </div>
  <br />
  <div>
    <label>Questions</label>

    <select class="form-control"
            (change)="onQuestionSelect($event)">
      <option value="">Select Existing</option>
      <option [value]="question.id"
              *ngFor="let question of currentLesson.questions">
        {{question.text}}
      </option>
    </select>


    <br />

    <div class="form-group">

      <input type="text"
             [(ngModel)]="currentQuestion.text"
             class="form-control"
             name="currentQuestion.text"
             placeholder="Add New">
    </div>

    <button type="button"
            class="btn btn-primary"
            (click)="addQuestion()">Save Question</button>
  </div>












  <div class="col-11 offset-1">
    <div class="form-group">
      <label>Question Text</label>
      <input type="text"
             [(ngModel)]="currentQuestion.text"
             class="form-control"
             name="currentQuestion.text">
    </div>

    <div class="col-10 offset-1">
      <select class="form-control"
              (change)="onSelect($event)">
        <option [value]="option.id || guid()"
                *ngFor="let option of currentQuestion.options; index as i">
          {{currentQuestion.options[i].option}} {{currentQuestion.options[i].isCorrectAnswer}}
        </option>
      </select>
      <!-- <div *ngFor="let option of currentQuestion.options; index as i"
           class="row">
        <div class="col-10">
          <input type="text"
                 [(ngModel)]="currentQuestion.options[i].option"
                 class="form-control"
                 name="currentQuestion.options[{{i}}]">
        </div>

        <div class="col-2">
          <div class="form-check">
            <input class="form-check-input"
                   type="checkbox"
                   value=""
                   [(ngModel)]="currentQuestion.options[i].isCorrectAnswer"
                   name="currentQuestion.options[{{i}}].isCorrectAnswer">
            <label class="form-check-label">
              Is this the correct answer?
            </label>
          </div>
        </div>
      </div> -->

      <div class="row">
        <div class="col-10">

          <div class="form-group">
            <label>Option</label>
            <input type="text"
                   [(ngModel)]="currentOption.option"
                   class="form-control"
                   name="currentOption.option">
          </div>
        </div>
        <div class="col-2">

          <div class="form-check">
            <input class="form-check-input"
                   type="checkbox"
                   value=""
                   [(ngModel)]="currentOption.isCorrectAnswer"
                   name="currentOption.isCorrectAnswer">
            <label class="form-check-label">
              Is this the correct answer?
            </label>
          </div>
        </div>
      </div>




      <button type="button"
              class="btn btn-primary"
              (click)="addTextOption()">Add Option</button>
    </div>

    <button type="button"
            class="btn btn-primary"
            (click)="addQuestion()">Add Question</button>

  </div>

</form>

{{currentLesson | json}}
<br>
{{lessonForm.value | json}}
